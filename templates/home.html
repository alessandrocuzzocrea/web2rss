<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <link rel="stylesheet" href="/css/vendor/pico.min.css">
    <script src="/js/vendor/htmx.js"></script>
    <style>
        /* Responsive table improvements */
        table {
            table-layout: fixed;
            width: 100%;
        }

        /* Column widths to prevent overflow */
        th:nth-child(1), td:nth-child(1) { width: 40%; } /* Feed info */
        th:nth-child(2), td:nth-child(2) { width: 15%; } /* Created */
        th:nth-child(3), td:nth-child(3) { width: 15%; } /* Last Refresh */
        th:nth-child(4), td:nth-child(4) { width: 10%; } /* Items */
        th:nth-child(5), td:nth-child(5) { width: 20%; } /* Actions */

        /* Ensure text wraps and doesn't overflow */
        td {
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* Make URLs break nicely */
        td a {
            word-break: break-all;
        }

        /* Responsive actions */
        @media (max-width: 768px) {
            th:nth-child(2), td:nth-child(2),
            th:nth-child(3), td:nth-child(3) {
                display: none;
            }
            th:nth-child(1), td:nth-child(1) { width: 60%; }
            th:nth-child(4), td:nth-child(4) { width: 15%; }
            th:nth-child(5), td:nth-child(5) { width: 25%; }
        }
    </style>
    <title>{{.Title}} - web2rss</title>
    <meta name="description" content="Convert websites to RSS feeds">
</head>
<body>
    <header class="container">
        <nav>
            <ul>
                <li><strong>üåê web2rss</strong></li>
            </ul>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/feeds">Feeds</a></li>
                <li><a href="/health">Health</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <section>
            <a href="/feed/new">Add new feed</a>
        </section>

        <section>
            <h2>Feeds</h2>
            <figure>
                <table>
                    <thead>
                        <tr>
                            <th>Feed</th>
                            <th>Created</th>
                            <th>Last Refresh</th>
                            <th>Items</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{range .Feeds}}
                        <tr>
                            <td>
                                <strong>{{.Name}}</strong><br>
                                <small><a href="{{.Url}}" target="_blank">{{.Url}}</a></small>
                            </td>
                            <td><small>{{.CreatedAt}}</small></td>
                            <td><small>{{if .LastRefreshedAt.Valid}}{{.LastRefreshedAt.Time}}{{else}}Never{{end}}</small></td>
                            <td>{{.ItemsCount}}</td>
                            <td>
                                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                    <a href="/feed/{{.ID}}/rss" target="_blank" role="button" class="outline" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">RSS</a>
                                    <form action="/feed/{{.ID}}/refresh" method="post" style="display:inline;">
                                        <button type="submit" class="outline" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">‚Üª</button>
                                    </form>
                                    <a href="/feed/{{.ID}}/edit" role="button" class="outline" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">Edit</a>
                                    <form action="/feed/{{.ID}}/reset" method="post" style="display:inline;">
                                        <button type="submit" class="outline" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">Reset</button>
                                    </form>
                                    <form action="/feed/{{.ID}}/delete" method="post" style="display:inline;">
                                        <button type="submit" class="outline" style="font-size: 0.8rem; padding: 0.25rem 0.5rem;">Delete</button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                        {{else}}
                        <tr>
                            <td colspan="5">No feeds available</td>
                        </tr>
                        {{end}}
                    </tbody>
                </table>
            </figure>
        </section>

    </main>

    <footer class="container">
        <p>
            <a href="https://github.com/alessandrocuzzocrea/web2rss" target="_blank" rel="noopener">
                View on GitHub
            </a>
        </p>
    </footer>
</body>
</html>

